# 各个组件实现原理

## Tab 组件


## Cascader 级联选择器实现原理

该组件可以展示多层级数据，如果数据存在children数据，则可以无限展示。最典型的应用的是省、市、区的选择。

多层显示很明显可以使用递归来实现，所以在Vue中可以组件引用自身组件来对数据进行渲染，也就是所谓的递归组件。如果在vue单文件中使用了跟该组件name一样的标签，那么就是调用自己。

```
<template>
  <cascaer-item></cascaer-item>
</template>
<script>
  export default {
    name: "CascaderItem"
  }
</script>
````


如何判断数据还有下一层？设置一个当前选中数据，比如当前选择了“北京市”，那么当前选中的就要把北京市这条数据记录下来，不仅是“北京市”这个名称而已，包括北京市下面的区域。这样就可以判断这条数据下有没有children从而进行判断是否继续进行渲染。


## Pagination 分页器组件实现原理

首先分页组件有几个按钮是必须显示的。
比如：第一页、最后一页、当前页、当前页+n页、当前页-n页、前一页、后一页

首先要确定你设计的组件需要什么功能，从而才能确定必须要传哪些数据给父组件。current(当前页数)、totalPage（总页数）这两个是必须存在的，这是构成分页器的必备条件。当然还需要点击事件，用来进行分页跳转。

其次就需要根据自己的设计来丰富你的组件库。比如从使用这个组件的人考虑：他是否想让数据只有一页的情况下隐藏分页器？他是否需要加上显示总页码的功能？又或者是否可以输入页码跳转到某一页等等。

这里只分析核心功能，读者需要额外功能可以自己添加，说不定可以创造出别的组件库都没有确又让使用者眼前一亮的功能，这都在于自己的设计。


[第一页,最后一页(也就是totalPage),currentPage,currentPage-1,currentPage-2,currentPage+1,currentPage+2]，首先需要对数组进行排序，如果当前页是第一页，那么就会出现两个“第一页”，所以还需要对数组进行去重处理。如果当前页是第一页还会出现0页和-1页，所以注意要过滤掉。

遍历数组，如果两个数组之间的差>1，那么就在中间加省略号，就是我们平常看到的分页中出现的省略号。

点击按钮触发点击事件
```
// 父组件监听
:current_page.sync = currnetPage

// 子组件触发
this.$emit("update:currentPage",n)
```

还有一点需要注意的是：关于展示页码的数据需要放在computed里面，根据父组件传过来的值进行对应渲染。


